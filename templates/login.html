<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <h1>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h1>
        </div>

        {% if error %}
        <div class="error-message">
            {{ error }}
        </div>
        {% endif %}

        <form method="POST" class="login-form">
            <div class="form-group">
                <label for="password">üîë –ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" name="password" required 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å">
            </div>

            <div class="form-group">
                <label for="encryption_key">üóùÔ∏è –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:</label>
                <input type="password" id="encryption_key" name="encryption_key" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è">
            </div>

            <div class="accordion">
                <button type="button" class="accordion-btn" onclick="toggleInstructions()">
                    üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                    <span class="arrow">‚ñº</span>
                </button>
                <div class="accordion-content" id="instruction-content">
                    <div class="instruction-text">
                        <p>1. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
                        <p>2. –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ)</p>
                        <p>3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–í—Ö–æ–¥"</p>
                        <p>‚ö†Ô∏è <strong>–ù–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ –ø–æ–ª—è –≤–≤–æ–¥–∞!</strong></p>
                    </div>
                </div>
            </div>

            <button type="submit" class="login-btn">üöÄ –í—Ö–æ–¥</button>
        </form>
    </div>

    <script>
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ LocalStorage
        document.getElementById('encryption_key').addEventListener('input', function(e) {
            const key = e.target.value;
            if (key) {
                localStorage.setItem('key_2025_2026_trim2', key);
                console.log('üîë –ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ LocalStorage');
            }
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª—é—á–∞ –∏–∑ LocalStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
            const savedKey = localStorage.getItem('key_2025_2026_trim2');
            if (savedKey) {
                document.getElementById('encryption_key').value = savedKey;
            }
        });

        // –û—á–∏—Å—Ç–∫–∞ LocalStorage –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–æ–ª—è –∫–ª—é—á–∞
        document.getElementById('encryption_key').addEventListener('change', function(e) {
            if (!e.target.value) {
                localStorage.removeItem('key_2025_2026_trim2');
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
        function toggleInstructions() {
            const content = document.getElementById('instruction-content');
            const arrow = document.querySelector('.arrow');
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                arrow.textContent = '‚ñº';
            } else {
                content.style.display = 'block';
                arrow.textContent = '‚ñ≤';
            }
        }
    </script>
</body>
</html>