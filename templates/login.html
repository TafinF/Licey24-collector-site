<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="background"></div>
    <div class="container">
        <div class="login-card">
            <div class="card-header">
                <div class="logo">üîê</div>
                <h1>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h1>
            </div>

            {% if error %}
            <div class="error-message">
                <div class="error-icon">‚ö†Ô∏è</div>
                {{ error }}
            </div>
            {% endif %}

            <form method="POST" class="login-form">
                <div class="input-group">
                    <div class="input-wrapper">
                        <input type="password" id="password" name="password" required 
                               class="modern-input">
                        <label for="password" class="floating-label">üîë –ü–∞—Ä–æ–ª—å</label>
                        <div class="input-icon">üîë</div>
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-wrapper">
                        <input type="password" id="encryption_key" name="encryption_key"
                               class="modern-input">
                        <label for="encryption_key" class="floating-label">üóùÔ∏è –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</label>
                        <div class="input-icon">üóùÔ∏è</div>
                    </div>
                </div>

                <div class="accordion-section">
                    <button type="button" class="accordion-toggle" id="accordion-toggle">
                        <span class="accordion-title">
                            <span class="accordion-icon">üìã</span>
                            –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                        </span>
                        <span class="accordion-arrow">‚ñº</span>
                    </button>
                    <div class="accordion-content" id="accordion-content">
                        <div class="instruction-list">
                            <div class="instruction-item">
                                <span class="instruction-number">1</span>
                                <span>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
                            </div>
                            <div class="instruction-item">
                                <span class="instruction-number">2</span>
                                <span>–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ)</span>
                            </div>
                            <div class="instruction-item">
                                <span class="instruction-number">3</span>
                                <span>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–í—Ö–æ–¥"</span>
                            </div>
                            <div class="instruction-warning">
                                <span class="warning-icon">‚ö†Ô∏è</span>
                                <span>–ù–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ –ø–æ–ª—è –≤–≤–æ–¥–∞!</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">
                    <span class="btn-text">üöÄ –í—Ö–æ–¥</span>
                    <div class="btn-loader"></div>
                </button>
            </form>
        </div>
    </div>

    <script>
        // Floating labels functionality
        document.querySelectorAll('.modern-input').forEach(input => {
            // Check if input has value on load
            if (input.value) {
                input.parentElement.classList.add('filled');
            }
            
            input.addEventListener('focus', () => {
                input.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', () => {
                if (!input.value) {
                    input.parentElement.classList.remove('focused');
                }
                input.parentElement.classList.toggle('filled', input.value !== '');
            });
        });

        // Accordion functionality
        const accordionToggle = document.getElementById('accordion-toggle');
        const accordionContent = document.getElementById('accordion-content');
        
        accordionToggle.addEventListener('click', () => {
            const isOpen = accordionContent.classList.toggle('open');
            const arrow = accordionToggle.querySelector('.accordion-arrow');
            arrow.textContent = isOpen ? '‚ñ≤' : '‚ñº';
            accordionToggle.classList.toggle('active', isOpen);
        });

        // Save encryption key to localStorage
        document.getElementById('encryption_key').addEventListener('input', function(e) {
            const key = e.target.value;
            localStorage.setItem('key_2025_2026_trim2', key);
        });

        // Load encryption key from localStorage
        window.addEventListener('load', function() {
            const savedKey = localStorage.getItem('key_2025_2026_trim2');
            if (savedKey) {
                const input = document.getElementById('encryption_key');
                input.value = savedKey;
                input.parentElement.classList.add('filled');
            }
        });

        // Form submission loading state
        document.querySelector('.login-form').addEventListener('submit', function(e) {
            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.classList.add('loading');
        });
    </script>
</body>
</html>