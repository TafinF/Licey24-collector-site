<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üë• –í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ</p>
        </div>

        <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π -->
        <div class="accordion">
            <button type="button" class="accordion-btn" onclick="toggleInstructions()">
                üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤—ã–±–æ—Ä—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                <span class="arrow">‚ñº</span>
            </button>
            <div class="accordion-content" id="instruction-content">
                <div class="instruction-text">
                    <p>1. –í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞</p>
                    <p>2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</p>
                    <p>3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                    <p>4. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
                </div>
            </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="üîç –í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞..." class="search-input">
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
        <div class="employees-list-container">
            <div class="employees-list" id="employeesList">
                <div class="initial-state" id="initialState">
                    <div class="initial-icon">üîç</div>
                    <h3>–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h3>
                    <p>–í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –≤—ã—à–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</p>
                </div>
                <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <div class="actions">
            <a href="/logout" class="btn btn-logout">üö™ –í—ã–π—Ç–∏</a>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        const employees = [
            {% for employee in employees %}
            {
                id: {{ employee.id }},
                name: "{{ employee.lastName }} {{ employee.firstName }} {{ employee.middleName }}",
                url: "{{ url_for('select_employee', employee_id=employee.id) }}"
            }{% if not loop.last %},{% endif %}
            {% endfor %}
        ];

        const searchInput = document.getElementById('searchInput');
        const employeesList = document.getElementById('employeesList');
        const initialState = document.getElementById('initialState');


        // –ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.trim().toLowerCase();
            
            if (searchTerm.length < 3) {
                showInitialState();
                return;
            }
            
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            const filteredEmployees = employees.filter(employee => 
                employee.name.toLowerCase().includes(searchTerm)
            );
            
            displayEmployees(filteredEmployees, searchTerm);
        });

        function showInitialState() {
            employeesList.innerHTML = '';
            employeesList.appendChild(initialState);
            initialState.style.display = 'flex';
        }

        function displayEmployees(filteredEmployees, searchTerm) {
            employeesList.innerHTML = '';
            
            if (filteredEmployees.length === 0) {
                employeesList.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">üòï</div>
                        <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "<strong>${searchTerm}</strong>" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</p>
                    </div>
                `;
                return;
            }
            
            filteredEmployees.forEach(employee => {
                const employeeItem = document.createElement('div');
                employeeItem.className = 'employee-item';
                employeeItem.innerHTML = `
                    <a href="${employee.url}" class="employee-btn">
                        <span class="employee-name">${employee.name}</span>
                    </a>
                `;
                employeesList.appendChild(employeeItem);
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
        function toggleInstructions() {
            const content = document.getElementById('instruction-content');
            const arrow = document.querySelector('.accordion-btn .arrow');
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                arrow.textContent = '‚ñº';
            } else {
                content.style.display = 'block';
                arrow.textContent = '‚ñ≤';
            }
        }

        // –°–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('instruction-content').style.display = 'none';
            showInitialState();
        });
    </script>
</body>
</html>